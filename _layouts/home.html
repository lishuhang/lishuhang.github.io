---
layout: base
---
<div class="flex justify-center py-8">
  <article class="text-center prose prose-p:font-extralight prose-slate dark:prose-invert primary-underline">
    {{ content }}
  </article>
</div>

<div class="w-full max-w-[1200px] mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-10 px-4" id="gallery-container">
  {% for post in site.posts %}
  <div class="post-item md:fadeIn mb-4 break-inside-avoid relative" data-index="{{ forloop.index0 }}">
    <!-- 整个内容区块作为链接 -->
    <a href="{{ post.url | relative_url }}" 
       class="gallery-link block p-4 bg-white dark:bg-slate-800 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 hover:-translate-y-1"
       target="_blank" 
       rel="noopener noreferrer">
      <div class="flex flex-col md:flex-row md:items-start gap-4">
        <!-- 图片容器 -->
        <div class="square-container md:w-[100px] flex-shrink-0">
          <img src="{{ post.image | relative_url }}" 
               alt="" 
               class="square-image w-full h-full object-cover rounded-md">
        </div>
        
        <!-- 文字内容 -->
        <div class="flex-1">
          <h2 class="text-lg md:text-xl lg:text-2xl mb-2 prose prose-slate dark:prose-invert">{{ post.title }}</h2>
          <div class="tags flex gap-2 flex-wrap">
            {% for tag in post.tags limit:3 %}
            <span class="text-xs text-slate-600 dark:text-slate-300">#{{ tag }}</span>
            {% endfor %}
          </div>
        </div>
      </div>
    </a>
  </div>
  {% endfor %}
</div>

<div id="load-more-wrapper" class="text-center mt-6 mb-10">
  <a href="#" id="loadMoreBtn" class="load-more-button px-6 py-3 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors">Load More</a>
</div>

<style>
  .square-container {
    position: relative;
    width: 100%;
    padding-top: 100%;
    overflow: hidden;
    border-radius: 0.375rem;
  }
  
  .square-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    transition: transform 0.3s ease;
  }

  /* 悬停效果 */
  .gallery-link:hover .square-image {
    transform: scale(1.05);
  }

  /* 响应式调整 */
  @media (max-width: 767px) {
    .square-container {
      max-width: none;
      padding-top: 100%;
    }
    .gallery-link {
      padding: 1rem;
    }
  }

  @media (min-width: 768px) {
    .square-container {
      width: 100px;
      padding-top: 100px;
    }
    .gallery-link {
      min-height: 120px;
    }
  }

  /* 分页样式 */
  .post-item {
    display: none;
  }
  
  .post-item:nth-child(-n+10) {
    display: block;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const items = document.querySelectorAll('.post-item');
    const perPage = 10;
    let currentPage = 1;
    const totalItems = items.length;
    const loadMoreBtn = document.getElementById('loadMoreBtn');

    // 初始化显示
    items.forEach((item, index) => index < perPage && (item.style.display = 'block'));

    function checkButton() {
      loadMoreBtn.style.display = currentPage * perPage >= totalItems ? 'none' : 'block';
    }

    function loadMore() {
      const start = currentPage * perPage;
      const end = start + perPage;
      items.forEach((item, index) => {
        if (index >= start && index < end) item.style.display = 'block';
      });
      currentPage++;
      checkButton();
    }

    loadMoreBtn.addEventListener('click', e => (e.preventDefault(), loadMore()));
    window.addEventListener('scroll', () => {
      if (document.documentElement.scrollTop + window.innerHeight >= document.documentElement.scrollHeight - 100) {
        loadMore();
      }
    });

    checkButton();
  });
</script>